<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<!--
@license
Copyright (c) 2016 Hemant Jadon. All rights reserved.
-->

<!-- Polymer and PolymerElements -->
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-tooltip/paper-tooltip.html">

<!-- Custom Web Components -->

<dom-module id="blog-console-card">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        display: block;
      }
      a{
        text-decoration: none;
      }
      .blog-container{
        min-height: 300px;
        margin: 20px 10px;
        border: 1px solid #e3e5e7;
        border-radius: 5px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.12);
        cursor: pointer;
      }
      .blog-container:hover .image-container{
        background: #f0f0f0;

      }
      .image-container{
        height: 150px;
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #e3e5e7;
      }
      .image-container .image{
        width: 100px;
        height: 100px;
        border: 1px solid transparent;
        border-radius: 50%;
        background: white;
      }
      .text-container{
        width: 550px;
        padding: 30px 25px;
      }
      .text-container .blog-detail-container .blog-category{
        color: var(--secondary-text-color);
        font-weight: 300;
        font-size: 0.9em;
      }
      .text-container .blog-detail-container .blog-title h3{
        color: var(--primary-text-color);
        font-weight: 400;
        font-size: 1.8em;
        text-align: center;
        padding: 10px 0px;
        margin: 0;
      }
      .text-container .blog-detail-container .blog-description p{
        color: var(--secondary-text-color);
        font-weight: 300;
        font-size: 1em;
        line-height: 200%;
        text-align: center;
        padding: 10px 0px;
        margin: 0;
      }
      .text-container .blog-stat-info-container{
        @apply(--layout-horizontal);
        @apply(--layout-justified);
        @apply(--layout-center);
      }
      .text-container .blog-stat-info-container > span{
        font-size: 0.8rem;
        position: relative;
        width: 150px;
        text-align: center;
        color: var(--secondary-text-color);
        margin: 5px 0px;
      }
      .text-container .blog-stat-info-container .blog-publish-status span.published{
        display: block;
        border: 1px solid green;
        border-radius: 3px;
        padding: 5px;
        color: green;
      }
      .text-container .blog-stat-info-container .blog-publish-status span.not-published{
        display: block;
        border: 1px solid red;
        border-radius: 3px;
        padding: 5px;
        color: red;
      }
      .text-container .blog-stat-info-container .blog-social-info-container
      paper-icon-button{
        --paper-icon-button-ink-color	: var(--accent-color);
        color: var(--accent-color);
        padding: 0px 8px;
        height: 100%;
      }

      .text-container .blog-stat-info-container .blog-social-info-container .blog-like-count{
        padding-right: 8px;
      }

      @media (max-width : 600px) {
        .text-container .blog-stat-info-container{
          @apply(--layout-vertical);
          @apply(--layout-justified);
          @apply(--layout-center);
        }
        .text-container .blog-stat-info-container > span{
          @apply(--layout-horizontal);
          @apply(--layout-around-justified);
        }
      }
    </style>

    <a href="/blogs/console/{{blog.id}}" id="{{__getUniqueId('redirect_link',index)}}">
      <div class="blog-container layout vertical" id="blog_container">
        <div class="image-container layout vertical center around-justified">
          <div class="image">
            <!-- Image Place Holder -->
          </div>
        </div>
        <div class="layout horizontal around-justified">
          <div class="text-container layout vertical justified">
            <div class="blog-detail-container layout vertical center" id="blog_detail_container">
              <span class="blog-category">{{toUpperCase(blog.category)}}</span>
              <span class="blog-title"><h3>{{blog.title}}</h3></span>
              <span class="blog-description"><p>{{blog.description}}</p></span>
            </div>
            <div class="blog-stat-info-container" id="blog_stat_info_container">
              <span class="blog-social-info-container layout horizontal start-justified center" on-tap="prevent_redirect">
                <div>
                  <paper-icon-button id="{{__getUniqueId('blog_like_button',index)}}" icon="favorite">
                  </paper-icon-button>
                  <paper-tooltip for="{{__getUniqueId('blog_like_button',index)}}" offset=0>Likes</paper-tooltip>
                  <span class="blog-like-count">1k</span>
                </div>
              </span>
              <span class="blog-timestamp">{{momentify(blog.timestamp)}}</span>
              <span class="blog-publish-status layout horizontal end-justified center" on-tap="prevent_redirect">
                <div>
                  <span class="published" hidden$="{{!blog.is_published}}">Published</span>
                  <span class="not-published" hidden$="{{blog.is_published}}">Not Published</span>
                  <paper-tooltip>Publish Status</paper-tooltip>
                </div>
              </span>
            </div>
          </div>
        </div>
      </div>
    </a>

    <!-- External Scripts -->
    <script type="text/javascript" src="../../bower_components/moment/moment.js"></script>

  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'blog-console-card',

      properties: {
        blog : {
          type : Object,
          notify : true
        },
        like:{
          type : Boolean,
          notify : true,
          value : false,
        },
      },

      toUpperCase(str){
        return str.toUpperCase();
      },
      momentify(DateTime_String){
        let _moment = moment(DateTime_String,moment.ISO_8601);

		    return _moment.format("MMMM DD[,] YYYY");
      },
      __getUniqueId(prefix_string,index){
        return `${prefix_string}_${index}`;
      },
    });
  })();
  </script>
</dom-module>
